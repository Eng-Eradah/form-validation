<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Login Form Validation </title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	
<div class="wrapper">
	<div class="form">
		<div class="title">
			Create Account
		</div>
		<form method="post" action="successpage.html" id="form1" onchange="validation();">
			<div class="input_wrap">
				<label for="input_text"> Username</label>
				<div class="input_field">
					<input type="text" class="input" id="user">
					<small id="helpId1" class="text-muted"></small>

				</div>
			</div>

			<div class="input_wrap">
				<label for="input_text"> Email</label>
				<div class="input_field">
					<input type='email' class="input" id="email"/>
					<small id="helpId4" class="text-muted"></small>

				</div>
			</div>

			<div class="input_wrap">
				<label for="input_password">Password</label>
				<div class="input_field">
					<input type='password' class="input"  id="password"/>
					<small id="helpId2" class="text-muted"></small>
				</div>
			</div>
			<div class="input_wrap">
				<label for="input_password">Confirm Password</label>
				<div class="input_field">
					<input type='password' class="input" id="password2"/>
					<small id="helpId3" class="text-muted"></small>
				</div>
			</div>
			<div class="input_wrap">
				<label for="input_password">Age</label>
				<div class="input_field">
					<input type='date' class="input" id="age1"/>
					<small id="helpId6" class="text-muted"></small>
				</div>
			</div>
			<div class="input_wrap">
				<label for="input_password">Web Site</label>
				<div class="input_field">
					<input type='url'  class="input" id="url"/>
					<small id="helpId5" class="text-muted"></small>
								</div>
			</div>

			<div class="input_wrap">
				<input type="submit" id="login_btn" class="btn disabled" value="Register" >
			</div>
		</form>
	</div>
</div>
<script>
var form1=document.getElementById("form1");
var sub=document.getElementById("sub");


var mass1=document.getElementById("helpId1");
var mass2=document.getElementById("helpId2");
var mass3=document.getElementById("helpId3");
var mass4=document.getElementById("helpId4");
var mass5=document.getElementById("helpId5");
var mass6=document.getElementById("helpId6");

var nameFormat= /^[A-Za-z ]+$/;
var paswd=  /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/;
var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
var urlformat = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // ip (v4) address
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ //port
            '(\\?[;&amp;a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i');

var login_btn = document.querySelector("#login_btn");
login_btn.disabled = true;




function validation(){
if( nameFormat.test(form1[0].value) &&  mailformat.test(form1[1].value) && paswd.test(form1[2].value) && (form1[3].value=== form1[2].value) &&form1[4].value!=''&& urlformat.test(form1[5].value))
{
	login_btn.disabled = false;
	login_btn.className = "btn enabled"
}
else{
	login_btn.disabled = true;
}
}


form1[0].addEventListener("mouseout",function confirmName() 
{ 
    
if(form1[0].value.match(nameFormat))
{
    form1[0].style.borderColor="green";
return true;
}
else
{
    mass1.innerHTML = "*Enter failed Name ";
    form1[0].style.borderColor="red";
return false;
}
});


form1[1].addEventListener("mouseout",function confirmEmail() 
{ 
if(form1[1].value.match(mailformat))
{
    form1[1].style.borderColor="green";
return true;
}
else
{
    mass4.innerHTML = "*Enter failed Email ";
    form1[1].style.borderColor="red";
return false;
}
});

form1[2].addEventListener("mouseout",function CheckPassword() 
{ 
if(form1[2].value.match(paswd)) 
{ 
    form1[2].style.borderColor="green";

return true;
}
else
{ 
    mass2.innerHTML = "* Enter corect password ";
    form1[2].style.borderColor="red";

return false;
}
});

form1[3].addEventListener("mouseout",function confirmPass() 
{ 
if(form1[3].value!=inputtxt.value) 
{ 
    mass3.innerHTML = "* Not match password ";
    form1[3].style.borderColor="red";
    return false;
}
else
{ 
    inputtxt2.style.borderColor="green";
    return true;
}
});



form1[4].addEventListener("mouseout",function valitedAge(){
var dateString = form1[4].value;
if(dateString !=""){
  var today = new Date();
  var birthDate = new Date(dateString);
  var age = today.getFullYear() - birthDate.getFullYear();
  var m = today.getMonth() - birthDate.getMonth();
  var da = today.getDate() - birthDate.getDate();
  
  if(m<0){
    m +=12;
  }
  if(da<0){
    da +=30;
  }
  if (age >= 18) {
	form1[4].style.borderColor="green";
	console.log("coorect");
    return true;
  }
  else {
/*	if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate()))
   {*/
    mass6.innerHTML = "*You enter failed age ";
    form1[4].style.borderColor="red";
	console.log("NOT coorect");
/*
return false;
 }*/
    return false;
  }

}
else {
  return false;
}
});
form1[5].addEventListener("mouseout",function confirmUrl() 
{ 
    
if(form1[5].value.match(urlformat))
{
    form1[5].style.borderColor="green";
return true;
}
else
{
    mass5.innerHTML = "*Enter failed Url ";
    form1[5].style.borderColor="red";
return false;
}
});

</script>

</body>
</html>